<%= project_layout(@project) do %>
  <div class="flex-1 p-4">
    <h2 class="text-2xl font-bold mb-4">Environment Variables</h2>
    
    <%= form_with(url: project_environment_variables_path(@project), method: :patch, class: "space-y-4") do |form| %>
      <% @project.environment_variables.each do |env_var| %>
        <div class="flex items-center space-x-2">
          <%= form.text_field "env_vars[#{env_var.id}][name]", value: env_var.name, class: "border rounded px-2 py-1 w-1/3" %>
          <%= form.text_field "env_vars[#{env_var.id}][value]", value: env_var.value, class: "border rounded px-2 py-1 w-1/2" %>
          <%= link_to "Delete", project_environment_variable_path(@project, env_var), method: :delete, data: { confirm: "Are you sure?" }, class: "text-red-600 hover:underline" %>
        </div>
      <% end %>
      
      <%= form.submit "Update Environment Variables", class: "bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600" %>
    <% end %>
    
    <%= link_to "Add New Environment Variable", new_project_environment_variable_path(@project), class: "mt-4 inline-block bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600" %>
  </div>
<% end %>