<%= form_with(model: project) do |form| %>
  <%= render "error_messages", resource: form.object %>

  <div class="form-group">
    <%= form.label :name %>
    <%= form.text_field :name, class: "form-control", value: RandomNameGenerator.generate_name %>
  </div>

  <div class="form-group">
    <%= form.label :project_type %>
    <%= form.select :project_type, Project.project_types.keys.map { |type| [type.titleize, type] }, {}, class: "form-control" %>
  </div>
  <div class="text-sm mb-4">
    <p>
      <b>Web service</b>: Useful for publicly accessible services like web applications.
    </p>
    <p>
      <b>Internal service</b>: Useful for services that should only be accessed within the cluster like databases.
    </p>
    <p>
      <b>Process</b>: Useful for services that should don't need to be connected to like background workers & cron jobs.
    </p>
  </div>

  <div class="form-group">
    <%= form.label :cluster_id %>
    <%= form.collection_select :cluster_id, current_user.clusters, :id, :name, class: "form-control" %>
  </div>

  <div class="form-group">
    <%= form.label :repository_url %>
    <%= form.text_field :repository_url, class: "form-control" %>
  </div>

  <div class="form-group">
    <%= form.label :branch %>
    <%= form.text_field :branch, class: "form-control" %>
  </div>

  <div class="form-group">
    <%= form.label :container_registry %>
    <%= form.text_field :container_registry, class: "form-control" %>
  </div>


  <div class="form-group">
    <%= form.label :autodeploy %>
    <%= form.check_box :autodeploy, class: "form-control" %>
  </div>

  <div class="form-group">
    <%= form.label :dockerfile_path %>
    <%= form.text_field :dockerfile_path, class: "form-control" %>
  </div>

  <div class="form-group">
    <%= form.label :docker_command %>
    <%= form.text_field :docker_command, class: "form-control" %>
  </div>

  <div class="form-group">
    <%= form.label :predeploy_command %>
    <%= form.text_field :predeploy_command, class: "form-control" %>
  </div>

  <div>
    <%= form.button button_text(form.send(:submit_default_value)), class: "btn btn-primary" %>

    <% if form.object.new_record? %>
      <%= link_to t("cancel"), projects_path, class: "btn btn-secondary" %>
    <% else %>
      <%= link_to t("cancel"), project_path(@project), class: "btn btn-secondary" %>
    <% end %>
  </div>
<% end %>
