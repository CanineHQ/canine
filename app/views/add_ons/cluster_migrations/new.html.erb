<%= add_on_layout(@add_on) do %>
  <h3 class="text-lg font-bold mb-4">Migrate Add-On to Another Cluster</h3>
  <p class="text-sm text-gray-500 mb-4">
    This will create a copy of the add-on on the target cluster and trigger an install.
    The original add-on will remain on the current cluster.
  </p>

  <% if @clusters.any? %>
    <%= form_with(url: add_on_cluster_migration_path(@add_on), method: :post, class: "space-y-4") do |form| %>
      <%= render(FormFieldComponent.new(label: "Target Cluster")) do %>
        <%= form.select :cluster_id,
          options_for_select(@clusters.map { |c| [c.name, c.id] }),
          { prompt: "Select a cluster" },
          { class: "select select-bordered w-full" } %>
      <% end %>
      <div class="form-footer">
        <%= form.submit "Migrate Add-On", class: "btn btn-primary", data: { turbo_submits_with: "Migrating..." } %>
      </div>
    <% end %>
  <% else %>
    <div class="alert alert-warning">
      <iconify-icon icon="lucide:alert-triangle"></iconify-icon>
      <span>No other running clusters available for migration.</span>
    </div>
  <% end %>
<% end %>
